(function(){var e={49352:function(e,t,a){"use strict";var r=a(45130),n=a(56768);function i(e,t,a,r,i,o){const s=(0,n.g2)("HelloWorld");return(0,n.uX)(),(0,n.Wv)(s)}var o=a(24232);const s=e=>((0,n.Qi)("data-v-575f73a0"),e=e(),(0,n.jt)(),e),c={id:"app",class:"web-camera-container"},h={class:"camera-button"},u={key:0},l={key:1},m={class:"camera-loading"},d=s((()=>(0,n.Lk)("ul",{class:"loader-circle"},[(0,n.Lk)("li"),(0,n.Lk)("li"),(0,n.Lk)("li")],-1))),p=[d],g={class:"err"},f={class:"rs"},v={ref:"camera",width:600,height:400,autoplay:""},C={id:"photoTaken",ref:"canvas",width:450,height:337.5},k={key:1,class:"camera-shoot"},b=s((()=>(0,n.Lk)("img",{src:"https://img.icons8.com/material-outlined/50/000000/camera--v2.png"},null,-1))),y=[b];function O(e,t,a,i,s,d){return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",h,[(0,n.Lk)("button",{type:"button",class:(0,o.C4)(["button is-rounded",{"is-primary":!s.isCameraOpen,"is-danger":s.isCameraOpen}]),onClick:t[0]||(t[0]=(...e)=>d.toggleCamera&&d.toggleCamera(...e))},[s.isCameraOpen?((0,n.uX)(),(0,n.CE)("span",l,"Close Camera")):((0,n.uX)(),(0,n.CE)("span",u,"Open Camera"))],2)]),(0,n.bo)((0,n.Lk)("div",m,p,512),[[r.aG,s.isCameraOpen&&s.isLoading]]),(0,n.Lk)("div",g,(0,o.v_)(this.error),1),(0,n.Lk)("div",f,(0,o.v_)(this.rs),1),s.isCameraOpen?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["camera-box",{flash:s.isShotPhoto}])},[(0,n.Lk)("div",{class:(0,o.C4)(["camera-shutter",{flash:s.isShotPhoto}])},null,2),(0,n.Lk)("video",v,null,512),(0,n.Lk)("canvas",C,null,512)],2)),[[r.aG,!s.isLoading]]):(0,n.Q3)("",!0),s.isCameraOpen&&!s.isLoading?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("button",{type:"button",class:"button",onClick:t[1]||(t[1]=(...e)=>d.takePhoto&&d.takePhoto(...e))},y)])):(0,n.Q3)("",!0)])}a(16573),a(78100),a(77936),a(37467),a(44732),a(79577),a(64979);var L=a(35926),w=a.n(L);w().config.update({region:"us-east-2",accessKeyId:"AKIAQSTFJC6MZ3BXVFUX",secretAccessKey:"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"});const P=new(w().Rekognition);var I={name:"HelloWorld",props:{msg:String},created(){this.tempcanvas=document.createElement("canvas"),this.tempcanvas.width=450,this.tempcanvas.height=337.5,this.tempcontext=this.tempcanvas.getContext("2d"),setInterval((()=>{if(this.isCameraOpen&&this.isPhotoTaken&&this.sourceImg&&this.tempcontext){this.tempcontext.drawImage(this.$refs.camera,0,0,450,337.5);var e=this.tempcanvas.toDataURL("image/jpeg"),t=e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");this.targetImg=this.getBinary(t),this.compare()}}),7e3)},data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,sourceImg:null,targetImg:[],tempcontext:null,tempcanvas:null,error:"",rs:""}},methods:{toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){this.isLoading=!0;const e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((e=>{this.isLoading=!1,this.$refs.camera.srcObject=e})).catch((e=>{this.isLoading=!1,alert("May the browser didn't support or there is some errors.")}))},stopCameraStream(){let e=this.$refs.camera.srcObject.getTracks();e.forEach((e=>{e.stop()}))},takePhoto(){if(!this.isPhotoTaken){this.isShotPhoto=!0;const e=50;setTimeout((()=>{this.isShotPhoto=!1}),e)}this.isPhotoTaken=!this.isPhotoTaken;const e=this.$refs.canvas.getContext("2d");e.drawImage(this.$refs.camera,0,0,450,337.5);var t=this.$refs.canvas.toDataURL("image/jpeg"),a=t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");this.sourceImg=this.getBinary(a)},getBinary(e){for(var t=atob(e),a=t.length,r=new ArrayBuffer(a),n=new Uint8Array(r),i=0;i<a;i++)n[i]=t.charCodeAt(i);return r},compare(){console.log("compare",this.sourceImg),this.error="comparing",P.compareFaces({SimilarityThreshold:70,SourceImage:{Bytes:this.sourceImg},TargetImage:{Bytes:this.targetImg}},((e,t)=>{e&&(this.error="khong tim thay mat hoac loi gif do",this.rs=""),t&&(console.log("data",t),this.error="",t.FaceMatches.length>0?this.rs=`Matched - Similarity: ${t.FaceMatches[0].Similarity} \n Confidence: ${t.FaceMatches[0].Face.Confidence}`:t.UnmatchedFaces.length>0&&(this.error=`Unmatched - Confidence: ${t.UnmatchedFaces[0].Confidence}`))}))}}},j=a(71241);const S=(0,j.A)(I,[["render",O],["__scopeId","data-v-575f73a0"]]);var T=S,x={name:"App",components:{HelloWorld:T}};const E=(0,j.A)(x,[["render",i]]);var A=E;(0,r.Ef)(A).mount("#app")},11976:function(){}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,i){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],i=e[u][2];for(var s=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var h=n();void 0!==h&&(t=h)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,o=r[0],s=r[1],c=r[2],h=0;if(o.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(c)var u=c(a)}for(t&&t(r);h<o.length;h++)i=o[h],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},r=self["webpackChunkvue_rekonigtion"]=self["webpackChunkvue_rekonigtion"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(49352)}));r=a.O(r)})();
//# sourceMappingURL=app.3609210f.js.map