(function(){var e={72710:function(e,t,a){"use strict";var s=a(45130),n=a(56768);function r(e,t,a,s,r,o){const i=(0,n.g2)("HelloWorld");return(0,n.uX)(),(0,n.Wv)(i)}var o=a(24232);const i=e=>((0,n.Qi)("data-v-2bf6a71e"),e=e(),(0,n.jt)(),e),c={id:"app",class:"web-camera-container"},h={class:"camera-button"},l=i((()=>(0,n.Lk)("span",null,"CreateAWS",-1))),u=[l],d={class:"camera-button"},m={key:0},p={key:1},g={class:"camera-loading"},f=i((()=>(0,n.Lk)("ul",{class:"loader-circle"},[(0,n.Lk)("li"),(0,n.Lk)("li"),(0,n.Lk)("li")],-1))),v=[f],k={class:"err"},y={class:"rs"},C={ref:"camera",width:600,height:400,autoplay:""},b={id:"photoTaken",ref:"canvas",width:450,height:337.5},L={key:1,class:"camera-shoot"},O=i((()=>(0,n.Lk)("img",{src:"https://img.icons8.com/material-outlined/50/000000/camera--v2.png"},null,-1))),w=[O];function I(e,t,a,r,i,l){return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.accessKeyId=e),placeholder:"accessKeyId"},null,512),[[s.Jo,i.accessKeyId]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.secretAccessKey=e),placeholder:"secretAccessKey"},null,512),[[s.Jo,i.secretAccessKey]]),(0,n.Lk)("div",h,[(0,n.Lk)("button",{type:"button",class:"button is-rounded",onClick:t[2]||(t[2]=(...e)=>l.update_aws&&l.update_aws(...e))},u)]),(0,n.Lk)("div",d,[(0,n.Lk)("button",{type:"button",class:(0,o.C4)(["button is-rounded",{"is-primary":!i.isCameraOpen,"is-danger":i.isCameraOpen}]),onClick:t[3]||(t[3]=(...e)=>l.toggleCamera&&l.toggleCamera(...e))},[i.isCameraOpen?((0,n.uX)(),(0,n.CE)("span",p,"Close Camera")):((0,n.uX)(),(0,n.CE)("span",m,"Open Camera"))],2)]),(0,n.bo)((0,n.Lk)("div",g,v,512),[[s.aG,i.isCameraOpen&&i.isLoading]]),(0,n.Lk)("div",k,(0,o.v_)(this.error),1),(0,n.Lk)("div",y,(0,o.v_)(this.rs),1),i.isCameraOpen?(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,o.C4)(["camera-box",{flash:i.isShotPhoto}])},[(0,n.Lk)("div",{class:(0,o.C4)(["camera-shutter",{flash:i.isShotPhoto}])},null,2),(0,n.Lk)("video",C,null,512),(0,n.Lk)("canvas",b,null,512)],2)),[[s.aG,!i.isLoading]]):(0,n.Q3)("",!0),i.isCameraOpen&&!i.isLoading?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("button",{type:"button",class:"button",onClick:t[4]||(t[4]=(...e)=>l.takePhoto&&l.takePhoto(...e))},w)])):(0,n.Q3)("",!0)])}a(16573),a(78100),a(77936),a(37467),a(44732),a(79577),a(64979);var P=a(35926),j=a.n(P);j().config.update({region:"us-east-2",accessKeyId:"",secretAccessKey:""});const A=new(j().Rekognition);var K={name:"HelloWorld",props:{msg:String},created(){},data(){return{secretAccessKey:"",accessKeyId:"",isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,sourceImg:null,targetImg:[],tempcontext:null,tempcanvas:null,error:"",rs:""}},methods:{update_aws(){A.config.update({region:"us-east-2",accessKeyId:this.accessKeyId,secretAccessKey:this.secretAccessKey}),this.tempcanvas=document.createElement("canvas"),this.tempcanvas.width=450,this.tempcanvas.height=337.5,this.tempcontext=this.tempcanvas.getContext("2d"),setInterval((()=>{if(this.isCameraOpen&&this.isPhotoTaken&&this.sourceImg&&this.tempcontext){this.tempcontext.drawImage(this.$refs.camera,0,0,450,337.5);var e=this.tempcanvas.toDataURL("image/jpeg"),t=e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");this.targetImg=this.getBinary(t),this.compare()}}),7e3)},toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){this.isLoading=!0;const e=window.constraints={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(e).then((e=>{this.isLoading=!1,this.$refs.camera.srcObject=e})).catch((e=>{this.isLoading=!1,alert("May the browser didn't support or there is some errors.")}))},stopCameraStream(){let e=this.$refs.camera.srcObject.getTracks();e.forEach((e=>{e.stop()}))},takePhoto(){if(!this.isPhotoTaken){this.isShotPhoto=!0;const e=50;setTimeout((()=>{this.isShotPhoto=!1}),e)}this.isPhotoTaken=!this.isPhotoTaken;const e=this.$refs.canvas.getContext("2d");e.drawImage(this.$refs.camera,0,0,450,337.5);var t=this.$refs.canvas.toDataURL("image/jpeg"),a=t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");this.sourceImg=this.getBinary(a)},getBinary(e){for(var t=atob(e),a=t.length,s=new ArrayBuffer(a),n=new Uint8Array(s),r=0;r<a;r++)n[r]=t.charCodeAt(r);return s},compare(){console.log("compare",this.sourceImg),this.error="comparing",A.compareFaces({SimilarityThreshold:70,SourceImage:{Bytes:this.sourceImg},TargetImage:{Bytes:this.targetImg}},((e,t)=>{e&&(this.error="khong tim thay mat hoac loi gif do",this.rs=""),t&&(console.log("data",t),this.error="",t.FaceMatches.length>0?this.rs=`Matched - Similarity: ${t.FaceMatches[0].Similarity} \n Confidence: ${t.FaceMatches[0].Face.Confidence}`:t.UnmatchedFaces.length>0&&(this.error=`Unmatched - Confidence: ${t.UnmatchedFaces[0].Confidence}`))}))}}},S=a(71241);const T=(0,S.A)(K,[["render",I],["__scopeId","data-v-2bf6a71e"]]);var x=T,E={name:"App",components:{HelloWorld:x}};const _=(0,S.A)(E,[["render",r]]);var U=_;(0,s.Ef)(U).mount("#app")},11976:function(){}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,r){if(!s){var o=1/0;for(l=0;l<e.length;l++){s=e[l][0],n=e[l][1],r=e[l][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(l--,1);var h=n();void 0!==h&&(t=h)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[s,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,o=s[0],i=s[1],c=s[2],h=0;if(o.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var l=c(a)}for(t&&t(s);h<o.length;h++)r=o[h],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(l)},s=self["webpackChunkvue_rekonigtion"]=self["webpackChunkvue_rekonigtion"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(72710)}));s=a.O(s)})();
//# sourceMappingURL=app.6335dd1a.js.map